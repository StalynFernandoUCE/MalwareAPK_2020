----------------------------------------
-- ä»¥ä¸‹æ?¯å¼•æ“æä¾›æ¥å£
----------------------------------------
-- #pragma mark  -- æ¸¸æˆç›¸å…³èƒ½åŠ›

--[[
æ¸¸æˆå·²ç»å‡†å¤‡å¥½
@param context æ¸¸æˆä¸Šä¸‹æ–‡
@param seqId è¯·æ±‚åºåˆ—å·
--]]
function appGameReady(context, seqId)
    print_Debug("------- Lua Receive NativeBridge appGameReady context = " .. context .. " seqId = " .. seqId)
    -- onPKGameReady()
    SendMessage(MsgID_Native_Bridge_Exit_AppGameReady)
end

--[[
 æ¸¸æˆé€€å‡º
 @param context æ¸¸æˆé€€å‡º
 @param seqId æˆ‘çš„æ¸¸æˆè¿›è¡Œåˆ°å“ªä¸ªé?¶æ®µ
 --]]
function appGameExit(context, seqId)
    print_Debug("------- Lua Receive NativeBridge appGameExit context = " .. context .. " seqId = " .. seqId)
    SendMessage(MsgID_Native_Bridge_Exit_Game)
end


----------------------------------------
-- #pragma mark  -- appäº‹ä»¶é€šçŸ¥

--[[
 appå‘ç”ŸæŸäº‹ä»¶é€šçŸ¥æ¸¸æˆ
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param seqId è¯·æ±‚åºåˆ—å·
 @param event äº‹ä»¶ID
 @param args å‚æ•°åˆ—è¡¨
 --]]
function appSentEventToGame(context, seqId, event, args)
    print_Debug("------- Lua Receive NativeBridge appSentEventToGame context = " .. context .. " seqId = " .. seqId .. " event = " .. event .. " args = " .. args)
    SendMessage(MsgID_Native_Bridge_SendGameEvent, context ,event, args, seqId)
end


----------------------------------------
-- #pragma mark  -- appåŸºç¡€èƒ½åŠ›
IsAPPInBackground = false
--[[
 appè¿›å…¥å‰å°
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param seqId è¯·æ±‚åºåˆ—å·
 --]]
function appEnterForeground(context, seqId)
    print_Debug("------- Lua Receive NativeBridge appEnterForeground context = " .. context .. " seqId = " .. seqId)
    SendMessage(MsgID_Native_Bridge_EnterForeground)
    IsAPPInBackground = false
    Audio.resumeAllByAutoResumeFlag()
end

--[[
 appè¿›å…¥åå°
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param seqId è¯·æ±‚åºåˆ—å·
 --]]
function appEnterBackground(context, seqId)
    print_Debug("------- Lua Receive NativeBridge appEnterBackground context = " .. context .. " seqId = " .. seqId)
    SendMessage(MsgID_Native_Bridge_EnterBackground)
    IsAPPInBackground = true
    Audio.pauseAll()
end


----------------------------------------
-- #pragma mark  -- ä¸šåŠ¡èƒ½åŠ›

--[[
 æ¸¸æˆä»appè·å–æ•°æ®å›è°ƒ
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param seqId æ¸¸æˆè¯·æ±‚æ—¶å€™ä¼ çš„åºåˆ—å·
 @param dataJson jsonæ•°æ®
 --]]
function appGetInfoFromAppCallback(context, seqId, dataJson)
    print_Debug("------- Lua Receive NativeBridge appGetInfoFromAppCallback context = " .. context .. " seqId = " .. seqId .. " dataJson = " .. dataJson)
    SendMessage(MsgID_Native_Bridge_APPInfo, context, dataJson, seqId)
end

--[[
 æ¸¸æˆä»appè·å–ä¸ªäººèµ„æ–™å›è°ƒ
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param seqId æ¸¸æˆè¯·æ±‚æ—¶å€™ä¼ çš„åºåˆ—å·
 @param dataJson jsonæ•°æ®
 --]]
function appGetUserInfoCallback(context, seqId, dataJson)
    print_Debug("------- Lua Receive NativeBridge appGetUserInfoCallback context = " .. context .. " seqId = " .. seqId .. " dataJson" .. dataJson)
    SendMessage(MsgID_Native_Bridge_UserInfo,context, dataJson, seqId)
end

--[[
 æ¸¸æˆä»appè·å–æ¸¸æˆä¿¡æ¯å›è°ƒ
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param seqId æ¸¸æˆè¯·æ±‚æ—¶å€™ä¼ çš„åºåˆ—å·
 @param dataJson jsonæ•°æ®
 --]]
function appGetGameInfoCallback(context, seqId, dataJson)
    print_Debug("------- Lua Receive NativeBridge appGetGameInfoCallback context = " .. context .. " seqId = " .. seqId .. " dataJson:" .. dataJson)
    SendMessage(MsgID_Native_Bridge_GameInfo, context, dataJson, seqId)
end

--[[
 æ¸¸æˆä»appè·å–è®¾å¤‡ä¿¡æ¯å›è°ƒ
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param seqId æ¸¸æˆè¯·æ±‚æ—¶å€™ä¼ çš„åºåˆ—å·
 @param dataJson jsonæ•°æ®
 --]]
function appGetDeviceInfoCallback(context, seqId, dataJson)
    print_Debug("------- Lua Receive NativeBridge appGetDeviceInfoCallback context = " .. context .. " seqId = " .. seqId .. " dataJson" .. dataJson)
    SendMessage(MsgID_Native_Bridge_DeveiceInfo, dataJson, seqId)
end

--[[
 æ¸¸æˆæ³¨å†Œçš„äº‹ä»¶å‘ç”Ÿæ—¶, appå›ä¼ æ•°æ®]
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param seqId è¯·æ±‚åºåˆ—å·
 @param event äº‹ä»¶ID
 @param dataJson å›è°ƒæ•°æ®
 --]]
function appRegisteredEventCallback(context, seqId, event, dataJson)
    print_Debug("------- Lua Receive NativeBridge appRegisteredEventCallback context = " .. context .. " seqId = " .. seqId .. " event" .. event .. " dataJson" .. dataJson)
    SendMessage(MsgID_Native_Bridge_RegisteredEvent, context, event, dataJson, seqId)
end

----------------------------------------
-- #pragma mark  -- æ•°æ®å­?å‚¨

--[[
 appä¿å­?æ•°æ®æˆåŠŸå›è°ƒ
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param savedKey å­?å‚¨çš„key
 @param success æ?¯å¦æˆåŠŸ
 --]]
function appSaveLocalDataCallback(context, savedKey, success)
    print_Debug("------- Lua Receive NativeBridge appSaveLocalDataCallback context = " .. context .. " savedKey = " .. savedKey .. " success" .. success)
    SendMessage(MsgID_Native_Bridge_SaveLocalData, savedKey, success, context)
end

--[[
 appè¯»å–æ•°æ®æˆåŠŸå›è°ƒ
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param loadedKey è¯»å–çš„key
 @param jsonData è¯»å–çš„æ•°æ®
 @param success æ?¯å¦æˆåŠŸ
 --]]
function appLoadDataCallback(context, loadedKey, jsonData, success)
    print_Debug("------- Lua Receive NativeBridge appLoadDataCallback context = " .. loadedKey .. " loadedKey = " .. jsonData .. " jsonData" .. jsonData.. " success" .. success)
    SendMessage(MsgID_Native_Bridge_LoadData, loadedKey, jsonData, success, context)
end

----------------------------------------
-- #pragma mark  -- æ–‡ä»¶ä¸‹è½½

--[[
 appä¸‹è½½æ–‡ä»¶å›è°ƒ
 @param context æ¸¸æˆä¸Šä¸‹æ–‡
 @param fileUrl ä¸‹è½½æ–‡ä»¶çš„url
 @param localFilePath æœ¬åœ°ç›®æ ‡è·¯å¾„
 @param success æ?¯å¦æˆåŠŸ
 --]]
function appDownloadFileCallback(context, fileUrl, localFilePath, success)
    print_Debug("------- Lua Receive NativeBridge appDownloadFileCallback context = " .. context .. " fileUrl = " .. fileUrl .. " localFilePath" .. localFilePath .. " success" .. success)
    SendMessage(MsgID_Native_Bridge_DownloadFile, context, localFilePath, success)
end

--[[
è·å–æ¸¸æˆå›¾ç‰‡æ•°æ®å›è°ƒ
@param context æ¸¸æˆä¸Šä¸‹æ–‡
@param imageUrl è¯·æ±‚çš„å›¾ç‰‡åœ°å€
@param textureKey TextureCacheä¸­çš„textureKey ä¸ºnil æˆ–è€… "" è¡¨ç¤ºåŠ è½½å¤±è´¥
    local sprite = display.newSprite(texture)
--]]
function appGetImageDataCallback(context, imageUrl, textureKey)
    print_Debug("------- Lua Receive NativeBridge appGetImageDataCallback context = " .. context .. " imageUrl = " .. imageUrl .. " textureKey =" .. textureKey)
    if textureKey and textureKey ~="" then
        local texture = cc.Director:getInstance():getTextureCache():getTextureForKey(textureKey)
        if texture and tolua.type(texture) == "cc.Texture2D" then
            SendMessage(MsgID_Native_Bridge_ImageData, context, texture)
        end
    end
end

--[[æè¿°:é”€æ¯æ¸¸æˆå¼•æ“*
    å‚æ•°:æ— 
    è¿”å›å€¼:æ— 
--]]
function releaseGameEngine()
    print_Debug("------- Lua Receive NativeBridge releaseGameEngine")
    if closeAllWebsocketConnections ~=nil and type(closeAllWebsocketConnections) == 'function' then
        closeAllWebsocketConnections()
    end
    SendMessage(MsgID_Native_Bridge_Release_Game_Engine)
    MsgSystemRelease()
end
